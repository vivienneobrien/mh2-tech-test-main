{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/vivienneobrien/Desktop/mh2-tech-test-main/components/detail.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport NumberFormat from \"react-number-format\";\n/* eslint-disable max-statements */\n\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useState } from \"react\";\nimport { add, format } from \"date-fns\";\nimport { Button } from \"./button\";\nimport { AccountHeadline, AccountLabel, AccountSection, AccountList, InfoText, Inset, RowContainer } from \"./style\";\n\nvar subtract = function subtract(a, b) {\n  var total = a - b;\n  return total;\n};\n\nvar calculatePercentage = function calculatePercentage(a, b) {\n  var total = a / b * 100;\n  return total;\n};\n\nvar formatPercentage = function formatPercentage(a) {\n  return a + \"%\" // .float/.ceil etc think about rounding and to a specific space\n  ;\n};\n\nvar divide = function divide(a, b) {\n  var total = a / b;\n  return total;\n};\n\nvar sincePurchased = function sincePurchased(_ref) {\n  var recentValuation = _ref.recentValuation,\n      originalPurchasePrice = _ref.originalPurchasePrice;\n  var sincePurchasedPrice = subtract(recentValuation.amount, originalPurchasePrice); // subtract (take it out of busines context), separation of concerns/calculations\n  // Can also do: <NumberFormat value={sincePurchasedPrice} displayType=\"text\" thousandSeparator={true} prefix=\"£\" decimalScale={2} />\n\n  {\n    new Intl.NumberFormat(\"en-GB\", {\n      style: \"currency\",\n      currency: \"GBP\",\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(sincePurchasedPrice);\n  }\n  return sincePurchasedPrice;\n};\n\nvar sincePurchasedPercentage = function sincePurchasedPercentage(_ref2) {\n  var recentValuation = _ref2.recentValuation,\n      originalPurchasePrice = _ref2.originalPurchasePrice;\n  var sincePurchasedPrice = subtract(recentValuation.amount, originalPurchasePrice);\n  var sincePurchasedPricePercentageCalculation = calculatePercentage(sincePurchasedPrice, originalPurchasePrice);\n  var sincePurchasedPricePercentageFormatted = formatPercentage(sincePurchasedPricePercentageCalculation);\n  return sincePurchasedPricePercentageFormatted;\n};\n\nvar annualAppreciation = function annualAppreciation(_ref3) {\n  var recentValuation = _ref3.recentValuation,\n      originalPurchasePrice = _ref3.originalPurchasePrice,\n      originalPurchasePriceDate = _ref3.originalPurchasePriceDate;\n  var sincePurchasedPrice = subtract(recentValuation.amount, originalPurchasePrice);\n  var sincePurchasedPricePercentageCalculation = calculatePercentage(sincePurchasedPrice, originalPurchasePrice);\n  var currentYear = new Date().getFullYear();\n  var numberOfYearsSincePurchased = currentYear - parseInt(originalPurchasePriceDate.slice(0, 4));\n  var annualAppreciationCalculation = divide(sincePurchasedPricePercentageCalculation, numberOfYearsSincePurchased);\n  var annualAppreciationFormatted = formatPercentage(annualAppreciationCalculation);\n  return annualAppreciationFormatted;\n}; // util.js file as plain js, pass in one date and give back a new string\n// semantic: use correct attributes e.g. h1 over a span. break down html semantics the right way\n\n\nvar formatDate = function formatDate(_ref4) {\n  var originalPurchasePriceDate = _ref4.originalPurchasePriceDate;\n  return new Intl.DateTimeFormat(\"en-GB\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"2-digit\"\n  }).format(originalPurchasePriceDate);\n}; // const account = {\n//   uid: \"65156cdc-5cfd-4b34-b626-49c83569f35e\",\n//   deleted: false,\n//   dateCreated: \"2020-12-03T08:55:33.421Z\",\n//   currency: \"GBP\",\n//   name: \"15 Temple Way\",\n//   bankName: \"Residential\",\n//   type: \"properties\",\n//   subType: \"residential\",\n//   originalPurchasePrice: 250000,\n//   originalPurchasePriceDate: \"2017-09-03\",\n//   recentValuation: { amount: 310000, status: \"good\" },\n//   associatedMortgages: [\n//     {\n//       name: \"HSBC Repayment Mortgage\",\n//       uid: \"fb463121-b51a-490d-9f19-d2ea76f05e25\",\n//       currentBalance: -175000,\n//     },\n//   ],\n//   canBeManaged: false,\n//   postcode: \"BS1 2AA\",\n//   lastUpdate: \"2020-12-01T08:55:33.421Z\",\n//   updateAfterDays: 30,\n// };\n// state, setstate then render\n// const Detail = ({}) => {\n//   useEffect(() => {\n//     window\n//       .fetch(\"/api/account\")\n//       .then((res) => res.json())\n//       .then(console.log);\n//   }, []);\n\n\nvar Detail = function Detail() {\n  _s();\n\n  var _useState = useState({}),\n      account = _useState[0],\n      setAccount = _useState[1];\n\n  useEffect(function () {\n    axios.get(\"../pages/api/account\").then(function (response) {\n      return setAccount(response);\n    }).then(console.log());\n  }, []);\n  console.log(account);\n  var mortgage;\n  var lastUpdate = new Date(account.lastUpdate);\n\n  if (account.associatedMortgages.length) {\n    mortgage = account.associatedMortgages[0];\n  }\n\n  return /*#__PURE__*/_jsxDEV(Inset, {\n    children: [/*#__PURE__*/_jsxDEV(AccountSection, {\n      children: [/*#__PURE__*/_jsxDEV(AccountLabel, {\n        children: \"Estimated Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(AccountHeadline, {\n        children: new Intl.NumberFormat(\"en-GB\", {\n          style: \"currency\",\n          currency: \"GBP\"\n        }).format(account.recentValuation.amount)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(AccountList, {\n        children: [/*#__PURE__*/_jsxDEV(InfoText, {\n          children: \"Last updated \".concat(format(lastUpdate, \"do MMM yyyy\"))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InfoText, {\n          children: \"Next update \".concat(format(add(lastUpdate, {\n            days: account.updateAfterDays\n          }), \"do MMM yyyy\"))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(AccountSection, {\n      children: [/*#__PURE__*/_jsxDEV(AccountLabel, {\n        children: \"Property details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(RowContainer, {\n        children: /*#__PURE__*/_jsxDEV(AccountList, {\n          children: [/*#__PURE__*/_jsxDEV(InfoText, {\n            children: account.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(InfoText, {\n            children: account.bankName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(InfoText, {\n            children: account.postcode\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, _this), mortgage && /*#__PURE__*/_jsxDEV(AccountSection, {\n      children: [/*#__PURE__*/_jsxDEV(AccountLabel, {\n        children: \"Mortgage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(RowContainer // This is a dummy action\n      , {\n        onClick: function onClick() {\n          return alert(\"You have navigated to the mortgage page\");\n        },\n        children: /*#__PURE__*/_jsxDEV(AccountList, {\n          children: [/*#__PURE__*/_jsxDEV(InfoText, {\n            children: new Intl.NumberFormat(\"en-GB\", {\n              style: \"currency\",\n              currency: \"GBP\"\n            }).format(Math.abs(account.associatedMortgages[0].currentBalance))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(InfoText, {\n            children: account.associatedMortgages[0].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(AccountSection, {\n      children: [/*#__PURE__*/_jsxDEV(AccountLabel, {\n        children: \"Valuation Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(RowContainer, {\n        children: /*#__PURE__*/_jsxDEV(AccountList, {\n          children: [/*#__PURE__*/_jsxDEV(InfoText, {\n            children: [\"Purchased for\\xA0\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\xA3199,500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 34\n            }, _this), \"\\xA0 on the\\xA0\", formatDate({\n              account: account\n            }), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(InfoText, {\n            children: [\"Since purchase\\xA0\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [sincePurchased(account), \" \", sincePurchasedPercentage(account)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(InfoText, {\n            children: [\"Annual Appreciation\\xA0\", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: annualAppreciation(account)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Button // This is a dummy action\n    , {\n      onClick: function onClick() {\n        return alert(\"You have navigated to the edit account page\");\n      },\n      children: \"Edit account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Detail, \"AWsNvWaHkHMx6jch3jzcPMVhqtg=\");\n\n_c = Detail;\nexport default Detail;\n\nvar _c;\n\n$RefreshReg$(_c, \"Detail\");","map":{"version":3,"sources":["/Users/vivienneobrien/Desktop/mh2-tech-test-main/components/detail.js"],"names":["NumberFormat","PropTypes","React","useEffect","useState","add","format","Button","AccountHeadline","AccountLabel","AccountSection","AccountList","InfoText","Inset","RowContainer","subtract","a","b","total","calculatePercentage","formatPercentage","divide","sincePurchased","recentValuation","originalPurchasePrice","sincePurchasedPrice","amount","Intl","style","currency","minimumFractionDigits","maximumFractionDigits","sincePurchasedPercentage","sincePurchasedPricePercentageCalculation","sincePurchasedPricePercentageFormatted","annualAppreciation","originalPurchasePriceDate","currentYear","Date","getFullYear","numberOfYearsSincePurchased","parseInt","slice","annualAppreciationCalculation","annualAppreciationFormatted","formatDate","DateTimeFormat","year","month","day","Detail","account","setAccount","axios","get","then","response","console","log","mortgage","lastUpdate","associatedMortgages","length","days","updateAfterDays","name","bankName","postcode","alert","Math","abs","currentBalance"],"mappings":"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","sourcesContent":["import NumberFormat from \"react-number-format\";\n/* eslint-disable max-statements */\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useState } from \"react\";\nimport { add, format } from \"date-fns\";\nimport { Button } from \"./button\";\n\nimport {\n  AccountHeadline,\n  AccountLabel,\n  AccountSection,\n  AccountList,\n  InfoText,\n  Inset,\n  RowContainer,\n} from \"./style\";\n\nconst subtract = (a, b) => {\n  const total = a - b;\n  return total;\n};\n\nconst calculatePercentage = (a, b) => {\n  const total = (a / b) * 100;\n  return total;\n};\n\nconst formatPercentage = (a) => {\n  return (\n    a + \"%\" // .float/.ceil etc think about rounding and to a specific space\n  );\n};\n\nconst divide = (a, b) => {\n  const total = a / b;\n  return total;\n};\n\nconst sincePurchased = ({ recentValuation, originalPurchasePrice }) => {\n  const sincePurchasedPrice = subtract(\n    recentValuation.amount,\n    originalPurchasePrice\n  ); // subtract (take it out of busines context), separation of concerns/calculations\n  // Can also do: <NumberFormat value={sincePurchasedPrice} displayType=\"text\" thousandSeparator={true} prefix=\"£\" decimalScale={2} />\n  {\n    new Intl.NumberFormat(\"en-GB\", {\n      style: \"currency\",\n      currency: \"GBP\",\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(sincePurchasedPrice);\n  }\n  return sincePurchasedPrice;\n};\n\nconst sincePurchasedPercentage = ({\n  recentValuation,\n  originalPurchasePrice,\n}) => {\n  const sincePurchasedPrice = subtract(\n    recentValuation.amount,\n    originalPurchasePrice\n  );\n  const sincePurchasedPricePercentageCalculation = calculatePercentage(\n    sincePurchasedPrice,\n    originalPurchasePrice\n  );\n  const sincePurchasedPricePercentageFormatted = formatPercentage(\n    sincePurchasedPricePercentageCalculation\n  );\n  return sincePurchasedPricePercentageFormatted;\n};\n\nconst annualAppreciation = ({\n  recentValuation,\n  originalPurchasePrice,\n  originalPurchasePriceDate,\n}) => {\n  const sincePurchasedPrice = subtract(\n    recentValuation.amount,\n    originalPurchasePrice\n  );\n  const sincePurchasedPricePercentageCalculation = calculatePercentage(\n    sincePurchasedPrice,\n    originalPurchasePrice\n  );\n\n  const currentYear = new Date().getFullYear();\n  const numberOfYearsSincePurchased =\n    currentYear - parseInt(originalPurchasePriceDate.slice(0, 4));\n\n  const annualAppreciationCalculation = divide(\n    sincePurchasedPricePercentageCalculation,\n    numberOfYearsSincePurchased\n  );\n  const annualAppreciationFormatted = formatPercentage(\n    annualAppreciationCalculation\n  );\n  return annualAppreciationFormatted;\n};\n\n// util.js file as plain js, pass in one date and give back a new string\n// semantic: use correct attributes e.g. h1 over a span. break down html semantics the right way\nconst formatDate = ({ originalPurchasePriceDate }) => {\n  return new Intl.DateTimeFormat(\"en-GB\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"2-digit\",\n  }).format(originalPurchasePriceDate);\n};\n\n// const account = {\n//   uid: \"65156cdc-5cfd-4b34-b626-49c83569f35e\",\n//   deleted: false,\n//   dateCreated: \"2020-12-03T08:55:33.421Z\",\n//   currency: \"GBP\",\n//   name: \"15 Temple Way\",\n//   bankName: \"Residential\",\n//   type: \"properties\",\n//   subType: \"residential\",\n//   originalPurchasePrice: 250000,\n//   originalPurchasePriceDate: \"2017-09-03\",\n//   recentValuation: { amount: 310000, status: \"good\" },\n//   associatedMortgages: [\n//     {\n//       name: \"HSBC Repayment Mortgage\",\n//       uid: \"fb463121-b51a-490d-9f19-d2ea76f05e25\",\n//       currentBalance: -175000,\n//     },\n//   ],\n//   canBeManaged: false,\n//   postcode: \"BS1 2AA\",\n//   lastUpdate: \"2020-12-01T08:55:33.421Z\",\n//   updateAfterDays: 30,\n// };\n\n// state, setstate then render\n// const Detail = ({}) => {\n//   useEffect(() => {\n//     window\n//       .fetch(\"/api/account\")\n//       .then((res) => res.json())\n//       .then(console.log);\n//   }, []);\n\nconst Detail = () => {\n  const [account, setAccount] = useState({});\n\n  useEffect(() => {\n    axios\n      .get(\"../pages/api/account\")\n      .then((response) => setAccount(response))\n      .then(console.log());\n  }, []);\n  console.log(account)\n\n  let mortgage;\n  const lastUpdate = new Date(account.lastUpdate);\n  if (account.associatedMortgages.length) {\n    mortgage = account.associatedMortgages[0];\n  }\n\n  return (\n    <Inset>\n      <AccountSection>\n        <AccountLabel>Estimated Value</AccountLabel>\n        <AccountHeadline>\n          {new Intl.NumberFormat(\"en-GB\", {\n            style: \"currency\",\n            currency: \"GBP\",\n          }).format(account.recentValuation.amount)}\n        </AccountHeadline>\n        <AccountList>\n          <InfoText>\n            {`Last updated ${format(lastUpdate, \"do MMM yyyy\")}`}\n          </InfoText>\n          <InfoText>\n            {`Next update ${format(\n              add(lastUpdate, { days: account.updateAfterDays }),\n              \"do MMM yyyy\"\n            )}`}\n          </InfoText>\n        </AccountList>\n      </AccountSection>\n      <AccountSection>\n        <AccountLabel>Property details</AccountLabel>\n        <RowContainer>\n          <AccountList>\n            <InfoText>{account.name}</InfoText>\n            <InfoText>{account.bankName}</InfoText>\n            <InfoText>{account.postcode}</InfoText>\n          </AccountList>\n        </RowContainer>\n      </AccountSection>\n      {mortgage && (\n        <AccountSection>\n          <AccountLabel>Mortgage</AccountLabel>\n          <RowContainer\n            // This is a dummy action\n            onClick={() => alert(\"You have navigated to the mortgage page\")}\n          >\n            <AccountList>\n              <InfoText>\n                {new Intl.NumberFormat(\"en-GB\", {\n                  style: \"currency\",\n                  currency: \"GBP\",\n                }).format(\n                  Math.abs(account.associatedMortgages[0].currentBalance)\n                )}\n              </InfoText>\n              <InfoText>{account.associatedMortgages[0].name}</InfoText>\n            </AccountList>\n          </RowContainer>\n        </AccountSection>\n      )}\n      <AccountSection>\n        <AccountLabel>Valuation Changes</AccountLabel>\n        <RowContainer>\n          <AccountList>\n            <InfoText>\n              Purchased for&nbsp;<strong>£199,500</strong>&nbsp; on the&nbsp;\n              {formatDate({ account })}{\" \"}\n            </InfoText>\n            <InfoText>\n              Since purchase&nbsp;\n              <strong>\n                {sincePurchased(account)} {sincePurchasedPercentage(account)}\n              </strong>\n            </InfoText>\n            <InfoText>\n              Annual Appreciation&nbsp;\n              <strong>{annualAppreciation(account)}</strong>\n            </InfoText>\n          </AccountList>\n        </RowContainer>\n      </AccountSection>\n      <Button\n        // This is a dummy action\n        onClick={() => alert(\"You have navigated to the edit account page\")}\n      >\n        Edit account\n      </Button>\n    </Inset>\n  );\n};\n\nexport default Detail;\n"]},"metadata":{},"sourceType":"module"}